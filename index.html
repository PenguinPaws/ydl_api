<!DOCTYPE html>

<html lang="en">
<head>
    <!-- Disable caching -->
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>YDL API</title>

    <link rel="stylesheet" href="static/css/ydl_api.css?v=1.0">

</head>

<body>
    <div class="mainContent">
        <div class="button_cont" align="center">
            <a class="mainButtons" href="/docs" target="_self" rel="nofollow noopener noreferrer" draggable="false">SwaggerUI Docs</a>
            <a class="mainButtons" href="/redoc" target="_self" rel="nofollow noopener noreferrer" draggable="false">ReDoc Docs</a>
        </div>
        <div class="button_cont" align="center">
            <a class="bookmarkletButton" href="/userscript.js" target="_self" rel="nofollow noopener">TamperMonkey / GreaseMonkey Script</a>
        </div>
        <div class="bookmarkletContainer" align="center">
            <span>Bookmarklet: </span>
            <a id="bookmarklet" href>YDL API Bookmarklet</a>
        </div>
    </div>
</body>

<script>
    // Inspiration - https://github.com/caiorss/bookmarklet-maker
    function generateBookmarklet (){
        let host = window.location.href;
        let endpoint = '/download?url='
        let videoURL = 'window.location.href.split("&")[0] ; '
        let code = host + endpoint + videoURL;
        
        let title = "YDL Download"
        let link  = document.getElementById("bookmarklet");
       
        var output = "javascript:" + encodeURIComponent("(function(){" + code.trim() +  "})();");
           
        link.text = title;
        link.href = output;
    }

    generateBookmarklet();
</script>
</html>